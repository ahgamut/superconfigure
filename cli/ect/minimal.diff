--- Efficient-Compression-Tool/src/mozjpeg/jmorecfg.h	2026-01-02 23:52:33.870492259 +0000
+++ -	2026-01-03 00:00:17.464349137 +0000
@@ -41,7 +41,7 @@
  * arrays is very slow on your hardware, you might want to change these.
  */
 
-#if BITS_IN_JSAMPLE == 8
+#if 1 || (BITS_IN_JSAMPLE == 8)
 /* JSAMPLE should be the smallest type that will hold the values 0..255.
  */
 
@@ -54,7 +54,7 @@
 #endif /* BITS_IN_JSAMPLE == 8 */
 
 
-#if BITS_IN_JSAMPLE == 12
+#if 0 && (BITS_IN_JSAMPLE == 12)
 /* JSAMPLE should be the smallest type that will hold the values 0..4095.
  * On nearly all machines "short" will do nicely.
  */

--- Efficient-Compression-Tool/src/CMakeLists.txt	2026-01-03 00:53:08.853642838 +0000
+++ -	2026-01-03 00:53:22.777132187 +0000
@@ -52,7 +52,7 @@
 
 # Detect CPU type and whether we're building 64-bit or 32-bit code, courtesy of mozjpeg
 math(EXPR BITS "${CMAKE_SIZEOF_VOID_P} * 8")
-string(TOLOWER ${CMAKE_SYSTEM_PROCESSOR} CMAKE_SYSTEM_PROCESSOR_LC)
+string(TOLOWER ${TARGET_ARCH} CMAKE_SYSTEM_PROCESSOR_LC)
 set(COUNT 1)
 foreach(ARCH ${CMAKE_OSX_ARCHITECTURES})
   if(COUNT GREATER 1)
